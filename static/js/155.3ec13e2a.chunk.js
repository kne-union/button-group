(self.webpackChunk_kne_components_button_group=self.webpackChunk_kne_components_button_group||[]).push([[155],{2899:(e,t,n)=>{var r=n(64579),o=n(2316),a=n(90931),i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||l.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}},64579:(e,t,n)=>{var r=n(78913),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},76155:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ButtonFooter:()=>Y,ConfirmButton:()=>D,ConfirmLink:()=>A,ConfirmText:()=>R,FetchButton:()=>$,LoadingButton:()=>_,default:()=>X,useLoading:()=>T,withConfirm:()=>H});var r=n(94922),o=n.n(r),a=n(28833);const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,r.useRef)(e);return t||(n.current=e),(0,r.useCallback)(function(){return n.current&&n.current(...arguments)},[])};var c=n(58612),l=n(89195),s=n(86340),u=n(54159),m=n.n(u),d=n(20274),p=n(16052),f=n(98771),g=n.n(f),h=n(95600),v=n.n(h);const C=(e,t)=>{const n=(0,r.useRef)(null);n.current=Object.assign({},{time:500,isDebounce:!1},t);const o=(0,r.useRef)(null),a=i(e);return(0,r.useLayoutEffect)(()=>{const e=o.current,t=()=>window.requestAnimationFrame(()=>{e&&a(e)});t();const r=new ResizeObserver((n.current.isDebounce?v():g())(t,n.current.time));return e&&r.observe(e),()=>{r.disconnect()}},[a]),o};var b=n(26938),k=n.n(b),E=n(73075),y=n.n(E);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(null,arguments)}function N(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}const w=["onClick","children","loading"],T=e=>{const[t,n]=(0,r.useState)(!1),o=i(function(){return n(!0),Promise.resolve(e&&e(...arguments)).then(()=>{n(!1)}).catch(e=>{n(!1),console.error(e)})});return{isLoading:t,setIsLoading:n,callback:o}},_=e=>{let{onClick:t,children:n,loading:r}=e,i=N(e,w);const{isLoading:c,callback:l}=T(t);return o().createElement(a.Button,x({},i,{loading:r||c,onClick:l}),"function"===typeof n?n(r||c):n)};var O="_zIHFy",W="_R-IrF",P="_F1kMl",F="_Iee0d",B="_aGBVE",L="_0oW1K";const j={message:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",confirm:"\u786e\u5b9a",delete:"\u5220\u9664",cancel:"\u53d6\u6d88",more:"\u66f4\u591a"},M=["title","message","isDelete","showCancel","cancelText","onCancel","isModal","okText","placement","children","onClick","getContainer","renderModal"],I=["children"],z=["children"],S=["children"],D=(0,d.createWithIntlProvider)("zh-CN",j,"button-group")(e=>{const{formatMessage:t}=(0,d.useIntl)(),n=Object.assign({},{isDelete:!0},e),{title:l,message:s,isDelete:u,showCancel:p,cancelText:f,onCancel:g,isModal:h,okText:v,placement:C,children:b,onClick:k,getContainer:E,renderModal:y}=n,w=N(n,M),[_,j]=(0,r.useState)(!1),{isLoading:I,callback:z}=T(k),S=i(()=>{j(!0)}),D=o().createElement(a.Flex,{className:P,vertical:!0,gap:8,onClick:e=>{e.stopPropagation()}},l&&o().createElement(a.Flex,{align:"flex-start",gap:8,className:F},u&&o().createElement(c.A,{className:"title-icon"}),l),o().createElement(a.Flex,{align:"flex-start",gap:8,className:m()(B,{[L]:l})},!l&&u?o().createElement(c.A,{className:"title-icon"}):null,s||t({id:"message"}))),A=()=>"function"===typeof b?b(x({},w,{onClick:S})):o().createElement(a.Button,x({},w,{loading:I,onClick:()=>{S()}}),b);if(h){const e={open:_,onCancel:()=>{j(!1),g&&g()},wrapClassName:W,okText:v||t(u?{id:"delete"}:{id:"confirm"}),cancelText:f||t({id:"cancel"}),onOk:e=>(j(!1),z(e)),closable:!1,okButtonProps:{danger:u},getContainer:E,children:D};return o().createElement(o().Fragment,null,"function"===typeof y?y(e):o().createElement(a.Modal,e),A())}return o().createElement(a.Popconfirm,{overlayClassName:m()(O),okButtonProps:{danger:u},title:D,open:_,getPopupContainer:E,onCancel:g,placement:C,showCancel:p,okText:v||t(u?{id:"delete"}:{id:"confirm"}),cancelText:f||t({id:"cancel"}),onOpenChange:j,onConfirm:e=>{z(e)}},A())}),A=e=>{let{children:t}=e,n=N(e,I);return o().createElement(D,n,e=>o().createElement(a.Typography.Link,e,t))},R=e=>{let{children:t}=e,n=N(e,z);return o().createElement(D,n,e=>o().createElement(a.Typography.Text,e,t))},H=e=>(console.warn("\u540e\u7eed\u7248\u672c\u53ef\u80fd\u5220\u9664\u8be5api\uff0c\u8bf7\u4e0d\u8981\u4f7f\u7528"),t=>{let{children:n}=t,r=N(t,S);return o().createElement(D,r,t=>o().createElement(e,t,n))}),V=["api","onClick"],$=e=>{let{api:t,onClick:n}=e,r=N(e,V);const a=(0,p.useFetch)(Object.assign({},t,{auto:!1})),{isLoading:i,refresh:c}=a;return o().createElement(_,x({},r,{loading:i,onClick:async()=>{const{output:e,errorStack:t}=await c({});Object.values(t).length>0||n&&n({data:e})}}))},q=y()(e=>{let{amountWidth:t,moreBtnWidth:n,buttonWidthList:r,spaceProps:o,compact:a}=e;const i=a?0:["small","middle","large"].indexOf(o.size)>-1?8*(["small","middle","large"].indexOf(o.size)+1):Number.isInteger(o.size)?o.size:8;let c=0,l=0;for(;t>=l+r[c]+c*i&&c<r.length;)l+=r[c],c+=1;for(;t<l+(c-1)*i+(c<r.length?n+i:0)&&c>0;)l-=r[c-1],c-=1;return c},e=>{let{amountWidth:t,moreBtnWidth:n,buttonWidthList:r,spaceProps:o,compact:a}=e;return"".concat(t).concat(n).concat(r.join(",")).concat(Object.values(o).join(",")).concat(a&&a.toString())});var G={"width-container":"_V58ju","hidden-container":"_XN3o6","hidden-inner":"_-depB","more-link-btn":"_Hh4Wb","menu-list":"_juFTd"};const K=["list","more","moreType","compact","showLength","getPopupContainer","trigger","itemClassName"],U=["className","confirm","buttonComponent","tooltipProps"],X=(0,d.createWithIntlProvider)("zh-CN",j,"button-group")(e=>{const{formatMessage:t}=(0,d.useIntl)(),n=Object.assign({},e),{list:c,more:u,moreType:p,compact:f,showLength:g,getPopupContainer:h,trigger:v,itemClassName:b}=n,E=N(n,K),y=(0,r.useMemo)(()=>c.filter(e=>!(null!=e&&e.hidden)),[c]),w=k()(E,["size","split","align","style"]),[T,O]=(0,r.useState)(y.length&&1),W=Number.isInteger(g)?g:T,P=i(()=>{const e=B.current,t=L.current,n=F.current;if(!e)return;const o=e.querySelectorAll(".button-group-item");if(!o)return;if(0===o.length)return;const a=n.clientWidth,i=t.clientWidth,c=[].map.call(o,e=>e.offsetWidth),l=q({amountWidth:a,moreBtnWidth:i,buttonWidthList:c,spaceProps:w,compact:f});(0,r.startTransition)(()=>{O(l)})}),F=C(P),B=C(P),L=C(P),j=y.slice(W),M=(e,t,n)=>{if("function"===typeof e)return e({key:t,className:m()("button-group-item",G["btn-item"],b)},{isDropdown:n});const{className:r,confirm:i,buttonComponent:c,tooltipProps:l}=e,s=N(e,U),u=i||s.message,d=c||(u?D:_),p=o().createElement(d,x({danger:u&&!1!==s.isDelete},Object.assign({},s,u&&(s.isModal||n)?{isModal:!0}:{},n?{type:"default"}:{}),{key:t,className:m()("button-group-item",r,b)}));return l?o().createElement(a.Tooltip,l,p):p},I=u||("link"===p?o().createElement(a.Button,{type:"link",className:m()("button-group-item",b,G["more-link-btn"])},o().createElement(l.A,{style:{fontSize:"16px"}})):o().createElement(a.Button,null,t({id:"more"}),o().createElement(s.A,null))),z=f?a.Space.Compact:a.Space;return o().createElement(o().Fragment,null,o().createElement("div",{className:G["width-container"],ref:F}),o().createElement("div",{className:G["hidden-container"]},o().createElement("div",{className:G["hidden-inner"],ref:L},I),o().createElement("div",{className:G["hidden-inner"],ref:B},o().createElement(z,w,y.map((e,t)=>o().createElement(r.Fragment,{key:t},M(e,t,!1)))))),o().createElement(z,w,y.slice(0,W).map((e,t)=>o().createElement(r.Fragment,{key:t},M(e,t,!1))),j.length>0&&o().createElement(a.Dropdown,{getPopupContainer:h,trigger:v,rootClassName:G["menu-list"],menu:{items:j.map((e,t)=>({key:t,label:M(e,t,!0)}))}},I)))});var J="_8fdVC",Q="_AFUod";const Y=e=>{let{children:t,className:n}=e;const[a,i]=(0,r.useState)(0),c=C(e=>{i(e.clientHeight)});return o().createElement("div",{className:m()(J,n),style:{"--footer-height":"".concat(a,"px")}},o().createElement("div",{ref:c,className:Q},t))}},78913:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},93375:(e,t,n)=>{var r=n(36382);e.exports=function(){return r.Date.now()}},95600:(e,t,n)=>{var r=n(2316),o=n(93375),a=n(2899),i=Math.max,c=Math.min;e.exports=function(e,t,n){var l,s,u,m,d,p,f=0,g=!1,h=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function C(t){var n=l,r=s;return l=s=void 0,f=t,m=e.apply(r,n)}function b(e){var n=e-p;return void 0===p||n>=t||n<0||h&&e-f>=u}function k(){var e=o();if(b(e))return E(e);d=setTimeout(k,function(e){var n=t-(e-p);return h?c(n,u-(e-f)):n}(e))}function E(e){return d=void 0,v&&l?C(e):(l=s=void 0,m)}function y(){var e=o(),n=b(e);if(l=arguments,s=this,p=e,n){if(void 0===d)return function(e){return f=e,d=setTimeout(k,t),g?C(e):m}(p);if(h)return clearTimeout(d),d=setTimeout(k,t),C(p)}return void 0===d&&(d=setTimeout(k,t)),m}return t=a(t)||0,r(n)&&(g=!!n.leading,u=(h="maxWait"in n)?i(a(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),y.cancel=function(){void 0!==d&&clearTimeout(d),f=0,l=p=s=d=void 0},y.flush=function(){return void 0===d?m:E(o())},y}},98771:(e,t,n)=>{var r=n(95600),o=n(2316);e.exports=function(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:a,maxWait:t,trailing:i})}}}]);
//# sourceMappingURL=155.3ec13e2a.chunk.js.map