(self.webpackChunk_kne_components_button_group=self.webpackChunk_kne_components_button_group||[]).push([[155,536],{2899:(e,t,n)=>{var r=n(64579),o=n(2316),i=n(90931),a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||l.test(e)?s(e.slice(2),n?2:8):a.test(e)?NaN:+e}},64579:(e,t,n)=>{var r=n(78913),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},76155:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ButtonFooter:()=>Q,ConfirmButton:()=>D,ConfirmLink:()=>S,ConfirmText:()=>$,FetchButton:()=>V,LoadingButton:()=>T,default:()=>U,useLoading:()=>w,withConfirm:()=>A});var r=n(94922),o=n.n(r),i=n(28833);const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,r.useRef)(e);return t||(n.current=e),(0,r.useCallback)(function(){return n.current&&n.current(...arguments)},[])};var c=n(58612),l=n(86340),s=n(54159),u=n.n(s),m=n(20274),d=n(16052),f=n(98771),p=n.n(f),g=n(95600),h=n.n(g);const v=(e,t)=>{const n=(0,r.useRef)(null);n.current=Object.assign({},{time:500,isDebounce:!1},t);const o=(0,r.useRef)(null),i=a(e);return(0,r.useLayoutEffect)(()=>{const e=o.current,t=()=>window.requestAnimationFrame(()=>{e&&i(e)});t();const r=new ResizeObserver((n.current.isDebounce?h():p())(t,n.current.time));return e&&r.observe(e),()=>{r.disconnect()}},[i]),o};var C=n(26938),b=n.n(C),E=n(73075),k=n.n(E);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(null,arguments)}function y(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}const N=["onClick","children","loading"],w=e=>{const[t,n]=(0,r.useState)(!1),o=a(function(){return n(!0),Promise.resolve(e&&e(...arguments)).then(()=>{n(!1)}).catch(e=>{n(!1),console.error(e)})});return{isLoading:t,setIsLoading:n,callback:o}},T=e=>{let{onClick:t,children:n,loading:r}=e,a=y(e,N);const{isLoading:c,callback:l}=w(t);return o().createElement(i.Button,x({},a,{loading:r||c,onClick:l}),"function"===typeof n?n(r||c):n)};var _="_zIHFy",O="_R-IrF",P="_F1kMl",W="_Iee0d",L="_aGBVE",B="_0oW1K";const F={message:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",confirm:"\u786e\u5b9a",delete:"\u5220\u9664",cancel:"\u53d6\u6d88",more:"\u66f4\u591a"},j=["title","message","isDelete","showCancel","cancelText","onCancel","isModal","okText","placement","children","onClick","getContainer","renderModal"],M=["children"],I=["children"],z=["children"],D=(0,m.createWithIntlProvider)("zh-CN",F,"button-group")(e=>{const{formatMessage:t}=(0,m.useIntl)(),n=Object.assign({},{isDelete:!0},e),{title:l,message:s,isDelete:d,showCancel:f,cancelText:p,onCancel:g,isModal:h,okText:v,placement:C,children:b,onClick:E,getContainer:k,renderModal:N}=n,T=y(n,j),[F,M]=(0,r.useState)(!1),{isLoading:I,callback:z}=w(E),D=a(()=>{M(!0)}),S=o().createElement(i.Flex,{className:P,vertical:!0,gap:8,onClick:e=>{e.stopPropagation()}},l&&o().createElement(i.Flex,{align:"flex-start",gap:8,className:W},d&&o().createElement(c.A,{className:"title-icon"}),l),o().createElement(i.Flex,{align:"flex-start",gap:8,className:u()(L,{[B]:l})},!l&&d?o().createElement(c.A,{className:"title-icon"}):null,s||t({id:"message"}))),$=()=>"function"===typeof b?b(x({},T,{onClick:D})):o().createElement(i.Button,x({},T,{loading:I,onClick:()=>{D()}}),b);if(h){const e={open:F,onCancel:()=>{M(!1),g&&g()},wrapClassName:O,okText:v||t(d?{id:"delete"}:{id:"confirm"}),cancelText:p||t({id:"cancel"}),onOk:e=>(M(!1),z(e)),closable:!1,okButtonProps:{danger:d},getContainer:k,children:S};return o().createElement(o().Fragment,null,"function"===typeof N?N(e):o().createElement(i.Modal,e),$())}return o().createElement(i.Popconfirm,{overlayClassName:u()(_),okButtonProps:{danger:d},title:S,open:F,getPopupContainer:k,onCancel:g,placement:C,showCancel:f,okText:v||t(d?{id:"delete"}:{id:"confirm"}),cancelText:p||t({id:"cancel"}),onOpenChange:M,onConfirm:e=>{z(e)}},$())}),S=e=>{let{children:t}=e,n=y(e,M);return o().createElement(D,n,e=>o().createElement(i.Typography.Link,e,t))},$=e=>{let{children:t}=e,n=y(e,I);return o().createElement(D,n,e=>o().createElement(i.Typography.Text,e,t))},A=e=>(console.warn("\u540e\u7eed\u7248\u672c\u53ef\u80fd\u5220\u9664\u8be5api\uff0c\u8bf7\u4e0d\u8981\u4f7f\u7528"),t=>{let{children:n}=t,r=y(t,z);return o().createElement(D,r,t=>o().createElement(e,t,n))}),R=["api","onClick"],V=e=>{let{api:t,onClick:n}=e,r=y(e,R);const i=(0,d.useFetch)(Object.assign({},t,{auto:!1})),{isLoading:a,refresh:c}=i;return o().createElement(T,x({},r,{loading:a,onClick:async()=>{const{output:e,errorStack:t}=await c({});Object.values(t).length>0||n&&n({data:e})}}))},q=k()(e=>{let{amountWidth:t,moreBtnWidth:n,buttonWidthList:r,spaceProps:o,compact:i}=e;const a=i?0:["small","middle","large"].indexOf(o.size)>-1?8*(["small","middle","large"].indexOf(o.size)+1):Number.isInteger(o.size)?o.size:8;let c=0,l=0;for(;t>=l+r[c]+c*a&&c<r.length;)l+=r[c],c+=1;for(;t<l+(c-1)*a+(c<r.length?n+a:0)&&c>0;)l-=r[c-1],c-=1;return c},e=>{let{amountWidth:t,moreBtnWidth:n,buttonWidthList:r,spaceProps:o,compact:i}=e;return`${t}${n}${r.join(",")}${Object.values(o).join(",")}${i&&i.toString()}`});var H={"width-container":"_V58ju","hidden-container":"_XN3o6","hidden-inner":"_-depB","menu-list":"_juFTd"};const G=["list","more","compact","showLength","getPopupContainer","trigger"],K=["className","confirm","buttonComponent","tooltipProps"],U=(0,m.createWithIntlProvider)("zh-CN",F,"button-group")(e=>{const{formatMessage:t}=(0,m.useIntl)(),n=Object.assign({},{more:o().createElement(i.Button,null,t({id:"more"}),o().createElement(l.A,null))},e),{list:c,more:s,compact:d,showLength:f,getPopupContainer:p,trigger:g}=n,h=y(n,G),C=(0,r.useMemo)(()=>c.filter(e=>!(null!=e&&e.hidden)),[c]),E=b()(h,["size","split","align","style"]),[k,N]=(0,r.useState)(C.length&&1),w=Number.isInteger(f)?f:k,_=a(()=>{const e=P.current,t=W.current,n=O.current;if(!e)return;const o=e.querySelectorAll(".button-group-item");if(!o)return;if(0===o.length)return;const i=n.clientWidth,a=t.clientWidth,c=[].map.call(o,e=>e.offsetWidth),l=q({amountWidth:i,moreBtnWidth:a,buttonWidthList:c,spaceProps:E,compact:d});(0,r.startTransition)(()=>{N(l)})}),O=v(_),P=v(_),W=v(_),L=C.slice(w),B=(e,t,n)=>{if("function"===typeof e)return e({key:t,className:u()("button-group-item",H["btn-item"])},{isDropdown:n});const{className:r,confirm:a,buttonComponent:c,tooltipProps:l}=e,s=y(e,K),m=a||s.message,d=c||(m?D:T),f=o().createElement(d,x({danger:m&&!1!==s.isDelete},Object.assign({},s,m&&(s.isModal||n)?{isModal:!0}:{}),{key:t,className:u()("button-group-item",r)}));return l?o().createElement(i.Tooltip,l,f):f},F=d?i.Space.Compact:i.Space;return o().createElement(o().Fragment,null,o().createElement("div",{className:H["width-container"],ref:O}),o().createElement("div",{className:H["hidden-container"]},o().createElement("div",{className:H["hidden-inner"],ref:W},s),o().createElement("div",{className:H["hidden-inner"],ref:P},o().createElement(F,E,C.map(B)))),o().createElement(F,E,C.slice(0,w).map((e,t)=>B(e,t,!1)),L.length>0&&o().createElement(i.Dropdown,{getPopupContainer:p,trigger:g,rootClassName:H["menu-list"],menu:{items:L.map((e,t)=>({key:t,label:B(e,t,!0)}))}},s)))});var X="_8fdVC",J="_AFUod";const Q=e=>{let{children:t,className:n}=e;const[i,a]=(0,r.useState)(0),c=v(e=>{a(e.clientHeight)});return o().createElement("div",{className:u()(X,n),style:{"--footer-height":`${i}px`}},o().createElement("div",{ref:c,className:J},t))}},78913:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},93375:(e,t,n)=>{var r=n(36382);e.exports=function(){return r.Date.now()}},95600:(e,t,n)=>{var r=n(2316),o=n(93375),i=n(2899),a=Math.max,c=Math.min;e.exports=function(e,t,n){var l,s,u,m,d,f,p=0,g=!1,h=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function C(t){var n=l,r=s;return l=s=void 0,p=t,m=e.apply(r,n)}function b(e){var n=e-f;return void 0===f||n>=t||n<0||h&&e-p>=u}function E(){var e=o();if(b(e))return k(e);d=setTimeout(E,function(e){var n=t-(e-f);return h?c(n,u-(e-p)):n}(e))}function k(e){return d=void 0,v&&l?C(e):(l=s=void 0,m)}function x(){var e=o(),n=b(e);if(l=arguments,s=this,f=e,n){if(void 0===d)return function(e){return p=e,d=setTimeout(E,t),g?C(e):m}(f);if(h)return clearTimeout(d),d=setTimeout(E,t),C(f)}return void 0===d&&(d=setTimeout(E,t)),m}return t=i(t)||0,r(n)&&(g=!!n.leading,u=(h="maxWait"in n)?a(i(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),x.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=f=s=d=void 0},x.flush=function(){return void 0===d?m:k(o())},x}},98771:(e,t,n)=>{var r=n(95600),o=n(2316);e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:i,maxWait:t,trailing:a})}}}]);
//# sourceMappingURL=155.cac8e64f.chunk.js.map