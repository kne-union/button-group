(self.webpackChunk_kne_components_button_group=self.webpackChunk_kne_components_button_group||[]).push([[155],{2899(e,t,n){var r=n(64579),o=n(2316),i=n(90931),a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||l.test(e)?s(e.slice(2),n?2:8):a.test(e)?NaN:+e}},64579(e,t,n){var r=n(78913),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},76155(e,t,n){"use strict";n.r(t),n.d(t,{ButtonFooter:()=>Z,ConfirmButton:()=>A,ConfirmLink:()=>R,ConfirmText:()=>H,FetchButton:()=>q,LoadingButton:()=>W,default:()=>J,useLoading:()=>_,withConfirm:()=>V});var r=n(94922),o=n.n(r),i=n(28833);const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,r.useRef)(e);return t||(n.current=e),(0,r.useCallback)(function(){return n.current&&n.current(...arguments)},[])};var c=n(58612),l=n(89195),s=n(86340),u=n(54159),m=n.n(u),d=n(20274),f=n(16052),p=n(98771),g=n.n(p),h=n(95600),v=n.n(h);const C=(e,t)=>{const n=(0,r.useRef)(null);n.current=Object.assign({},{time:500,isDebounce:!1},t);const o=(0,r.useRef)(null),i=a(e);return(0,r.useLayoutEffect)(()=>{const e=o.current,t=()=>window.requestAnimationFrame(()=>{e&&i(e)});t();const r=new ResizeObserver((n.current.isDebounce?v():g())(t,n.current.time));return e&&r.observe(e),()=>{r.disconnect()}},[i]),o};var b=n(26938),E=n.n(b),k=n(73075),y=n.n(k),x=n(85714);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(null,arguments)}function w(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}const T=["onClick","children","loading"],_=e=>{const[t,n]=(0,r.useState)(!1),o=a(function(){return n(!0),Promise.resolve(e&&e(...arguments)).then(()=>{n(!1)}).catch(e=>{n(!1),console.error(e)})});return{isLoading:t,setIsLoading:n,callback:o}},W=e=>{let{onClick:t,children:n,loading:r}=e,a=w(e,T);const{isLoading:c,callback:l}=_(t);return o().createElement(i.Button,N({},a,{loading:r||c,onClick:l}),"function"===typeof n?n(r||c):n)};var O="_zIHFy",P="_R-IrF",L="_F1kMl",F="_Iee0d",B="_aGBVE",j="_0oW1K";const M={message:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",confirm:"\u786e\u5b9a",delete:"\u5220\u9664",cancel:"\u53d6\u6d88",more:"\u66f4\u591a"},z=["title","message","isDelete","showCancel","cancelText","onCancel","isModal","okText","placement","children","onClick","getContainer","renderModal"],I=["children"],S=["children"],D=["children"],A=(0,d.createWithIntlProvider)("zh-CN",M,"button-group")(e=>{const{formatMessage:t}=(0,d.useIntl)(),n=Object.assign({},{isDelete:!0},e),{title:l,message:s,isDelete:u,showCancel:f,cancelText:p,onCancel:g,isModal:h,okText:v,placement:C,children:b,onClick:E,getContainer:k,renderModal:y}=n,x=w(n,z),[T,W]=(0,r.useState)(!1),{isLoading:M,callback:I}=_(E),S=a(()=>{W(!0)}),D=o().createElement(i.Flex,{className:L,vertical:!0,gap:8,onClick:e=>{e.stopPropagation()}},l&&o().createElement(i.Flex,{align:"flex-start",gap:8,className:F},u&&o().createElement(c.A,{className:"title-icon"}),l),o().createElement(i.Flex,{align:"flex-start",gap:8,className:m()(B,{[j]:l})},!l&&u?o().createElement(c.A,{className:"title-icon"}):null,s||t({id:"message"}))),A=()=>"function"===typeof b?b(N({},x,{onClick:S})):o().createElement(i.Button,N({},x,{loading:M,onClick:()=>{S()}}),b);if(h){const e={open:T,onCancel:()=>{W(!1),g&&g()},wrapClassName:P,okText:v||t(u?{id:"delete"}:{id:"confirm"}),cancelText:p||t({id:"cancel"}),onOk:e=>(W(!1),I(e)),closable:!1,okButtonProps:{danger:u},getContainer:k,children:D};return o().createElement(o().Fragment,null,"function"===typeof y?y(e):o().createElement(i.Modal,e),A())}return o().createElement(i.Popconfirm,{overlayClassName:m()(O),okButtonProps:{danger:u},title:D,open:T,getPopupContainer:k,onCancel:g,placement:C,showCancel:f,okText:v||t(u?{id:"delete"}:{id:"confirm"}),cancelText:p||t({id:"cancel"}),onOpenChange:W,onConfirm:e=>{I(e)}},A())}),R=e=>{let{children:t}=e,n=w(e,I);return o().createElement(A,n,e=>o().createElement(i.Typography.Link,e,t))},H=e=>{let{children:t}=e,n=w(e,S);return o().createElement(A,n,e=>o().createElement(i.Typography.Text,e,t))},V=e=>(console.warn("\u540e\u7eed\u7248\u672c\u53ef\u80fd\u5220\u9664\u8be5api\uff0c\u8bf7\u4e0d\u8981\u4f7f\u7528"),t=>{let{children:n}=t,r=w(t,D);return o().createElement(A,r,t=>o().createElement(e,t,n))}),$=["api","onClick"],q=e=>{let{api:t,onClick:n}=e,r=w(e,$);const i=(0,f.useFetch)(Object.assign({},t,{auto:!1})),{isLoading:a,refresh:c}=i;return o().createElement(W,N({},r,{loading:a,onClick:async()=>{const{output:e,errorStack:t}=await c({});Object.values(t).length>0||n&&n({data:e})}}))},G=y()(e=>{let{amountWidth:t,moreBtnWidth:n,buttonWidthList:r,spaceProps:o,compact:i}=e;const a=i?0:["small","middle","large"].indexOf(o.size)>-1?8*(["small","middle","large"].indexOf(o.size)+1):Number.isInteger(o.size)?o.size:8;let c=0,l=0;for(;t>=l+r[c]+c*a&&c<r.length;)l+=r[c],c+=1;for(;t<l+(c-1)*a+(c<r.length?n+a:0)&&c>0;)l-=r[c-1],c-=1;return c},e=>{let{amountWidth:t,moreBtnWidth:n,buttonWidthList:r,spaceProps:o,compact:i}=e;return"".concat(t).concat(n).concat(r.join(",")).concat(Object.values(o).join(",")).concat(i&&i.toString())});var K={"width-container":"_V58ju","hidden-container":"_XN3o6","hidden-inner":"_-depB","more-link-btn":"_Hh4Wb","menu-list":"_juFTd"};const U=["list","more","moreType","compact","showLength","getPopupContainer","trigger","itemClassName"],X=["className","confirm","buttonComponent","tooltipProps"],J=(0,d.createWithIntlProvider)("zh-CN",M,"button-group")(e=>{const{formatMessage:t}=(0,d.useIntl)(),n=Object.assign({},e),{list:c,more:u,moreType:f,compact:p,showLength:g,getPopupContainer:h,trigger:v,itemClassName:b}=n,k=w(n,U),y=(0,r.useMemo)(()=>c.filter(e=>!(null!=e&&e.hidden)),[c]),x=E()(k,["size","split","align","style"]),[T,_]=(0,r.useState)(y.length&&1),O=Number.isInteger(g)?g:T,P=a(()=>{const e=F.current,t=B.current,n=L.current;if(!e)return;const o=e.querySelectorAll(".button-group-item");if(!o)return;if(0===o.length)return;const i=n.clientWidth,a=t.clientWidth,c=[].map.call(o,e=>e.offsetWidth),l=G({amountWidth:i,moreBtnWidth:a,buttonWidthList:c,spaceProps:x,compact:p});(0,r.startTransition)(()=>{_(l)})}),L=C(P),F=C(P),B=C(P),j=y.slice(O),M=(e,t,n)=>{if("function"===typeof e)return e({key:t,className:m()("button-group-item",K["btn-item"],b)},{isDropdown:n});const{className:r,confirm:a,buttonComponent:c,tooltipProps:l}=e,s=w(e,X),u=a||s.message,d=c||(u?A:W),f=o().createElement(d,N({danger:u&&!1!==s.isDelete},Object.assign({},s,u&&(s.isModal||n)?{isModal:!0}:{},n?{type:"default"}:{}),{key:t,className:m()("button-group-item",r,b)}));return l?o().createElement(i.Tooltip,l,f):f},z=u||("link"===f?o().createElement(i.Button,{type:"link",className:m()("button-group-item",b,K["more-link-btn"])},o().createElement(l.A,{style:{fontSize:"16px"}})):o().createElement(i.Button,null,t({id:"more"}),o().createElement(s.A,null))),I=p?i.Space.Compact:i.Space;return o().createElement(o().Fragment,null,o().createElement("div",{className:K["width-container"],ref:L}),o().createElement("div",{className:K["hidden-container"]},o().createElement("div",{className:K["hidden-inner"],ref:B},z),o().createElement("div",{className:K["hidden-inner"],ref:F},o().createElement(I,x,y.map((e,t)=>o().createElement(r.Fragment,{key:t},M(e,t,!1)))))),o().createElement(I,x,y.slice(0,O).map((e,t)=>o().createElement(r.Fragment,{key:t},M(e,t,!1))),j.length>0&&o().createElement(i.Dropdown,{getPopupContainer:h,trigger:v,rootClassName:K["menu-list"],menu:{items:j.map((e,t)=>({key:t,label:M(e,t,!0)}))}},z)))});var Q="_8fdVC",Y="_AFUod";const Z=e=>{let{children:t,className:n,innerClassName:i,target:a}=e;const[c,l]=(0,r.useState)(0),[s,u]=(0,r.useState)(!1),d=C(e=>{l(e.clientHeight)});(0,r.useEffect)(()=>{const e=g()(()=>{u(window.innerWidth<=768)},300);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);const f=o().createElement("div",{ref:d,className:m()(Y,i)},t);return o().createElement("div",{className:m()(Q,n),style:{"--footer-height":"".concat(c,"px")}},s?(0,x.createPortal)(f,a||document.body):f)}},78913(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},93375(e,t,n){var r=n(36382);e.exports=function(){return r.Date.now()}},95600(e,t,n){var r=n(2316),o=n(93375),i=n(2899),a=Math.max,c=Math.min;e.exports=function(e,t,n){var l,s,u,m,d,f,p=0,g=!1,h=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function C(t){var n=l,r=s;return l=s=void 0,p=t,m=e.apply(r,n)}function b(e){var n=e-f;return void 0===f||n>=t||n<0||h&&e-p>=u}function E(){var e=o();if(b(e))return k(e);d=setTimeout(E,function(e){var n=t-(e-f);return h?c(n,u-(e-p)):n}(e))}function k(e){return d=void 0,v&&l?C(e):(l=s=void 0,m)}function y(){var e=o(),n=b(e);if(l=arguments,s=this,f=e,n){if(void 0===d)return function(e){return p=e,d=setTimeout(E,t),g?C(e):m}(f);if(h)return clearTimeout(d),d=setTimeout(E,t),C(f)}return void 0===d&&(d=setTimeout(E,t)),m}return t=i(t)||0,r(n)&&(g=!!n.leading,u=(h="maxWait"in n)?a(i(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),y.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=f=s=d=void 0},y.flush=function(){return void 0===d?m:k(o())},y}},98771(e,t,n){var r=n(95600),o=n(2316);e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:i,maxWait:t,trailing:a})}}}]);
//# sourceMappingURL=155.19f76d20.chunk.js.map