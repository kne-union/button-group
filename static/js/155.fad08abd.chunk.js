(self.webpackChunk_kne_components_button_group=self.webpackChunk_kne_components_button_group||[]).push([[155],{76155(e,t,n){"use strict";n.r(t),n.d(t,{ButtonFooter:()=>Y,ConfirmButton:()=>D,ConfirmLink:()=>A,ConfirmText:()=>R,FetchButton:()=>q,LoadingButton:()=>_,default:()=>X,useLoading:()=>T,withConfirm:()=>V});var r=n(94922),o=n(28833);const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,r.useRef)(e);return t||(n.current=e),(0,r.useCallback)(function(){return n.current&&n.current(...arguments)},[])};var i=n(58612),c=n(89195),l=n(86340),s=n(54159),u=n.n(s),m=n(20274),d=n(16052),f=n(98771),p=n.n(f),g=n(95600),h=n.n(g);const v=(e,t)=>{const n=(0,r.useRef)(null);n.current=Object.assign({},{time:500,isDebounce:!1},t);const o=(0,r.useRef)(null),i=a(e);return(0,r.useLayoutEffect)(()=>{const e=o.current,t=()=>window.requestAnimationFrame(()=>{e&&i(e)});t();const r=new ResizeObserver((n.current.isDebounce?h():p())(t,n.current.time));return e&&r.observe(e),()=>{r.disconnect()}},[i]),o};var b=n(26938),C=n.n(b),E=n(73075),k=n.n(E),y=n(85714);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(null,arguments)}function x(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}const N=["onClick","children","loading"],T=e=>{const[t,n]=(0,r.useState)(!1),o=a(function(){return n(!0),Promise.resolve(e&&e(...arguments)).then(()=>{n(!1)}).catch(e=>{n(!1),console.error(e)})});return{isLoading:t,setIsLoading:n,callback:o}},_=e=>{let{onClick:t,children:n,loading:a}=e,i=x(e,N);const{isLoading:c,callback:l}=T(t);return r.createElement(o.Button,w({},i,{loading:a||c,onClick:l}),"function"===typeof n?n(a||c):n)};var F="_zIHFy",O="_R-IrF",W="_F1kMl",P="_Iee0d",L="_aGBVE",B="_0oW1K";const M={message:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",confirm:"\u786e\u5b9a",delete:"\u5220\u9664",cancel:"\u53d6\u6d88",more:"\u66f4\u591a"},j=["title","message","isDelete","showCancel","cancelText","onCancel","isModal","okText","placement","children","onClick","getContainer","renderModal"],S=["children"],z=["children"],I=["children"],D=(0,m.createWithIntlProvider)("zh-CN",M,"button-group")(e=>{const{formatMessage:t}=(0,m.useIntl)(),n=Object.assign({},e),{title:c,message:l,isDelete:s,showCancel:d,cancelText:f,onCancel:p,isModal:g,okText:h,placement:v,children:b,onClick:C,getContainer:E,renderModal:k}=n,y=x(n,j),[N,_]=(0,r.useState)(!1),{isLoading:M,callback:S}=T(C),z=a(()=>{_(!0)}),I=r.createElement(o.Flex,{className:W,vertical:!0,gap:8,onClick:e=>{e.stopPropagation()}},c&&r.createElement(o.Flex,{align:"flex-start",gap:8,className:P},s&&r.createElement(i.A,{className:"title-icon"}),c),r.createElement(o.Flex,{align:"flex-start",gap:8,className:u()(L,{[B]:c})},!c&&s?r.createElement(i.A,{className:"title-icon"}):null,l||t({id:"message"}))),D=()=>"function"===typeof b?b(w({},y,{onClick:z},s&&{style:w({color:"#ff4d4f"},y.style)})):r.createElement(o.Button,w({},y,{loading:M,onClick:()=>{z()}}),b);if(g){const e={open:N,onCancel:()=>{_(!1),p&&p()},wrapClassName:O,okText:h||t(s?{id:"delete"}:{id:"confirm"}),cancelText:f||t({id:"cancel"}),onOk:e=>(_(!1),S(e)),closable:!1,okButtonProps:{danger:s},getContainer:E,children:I};return r.createElement(r.Fragment,null,"function"===typeof k?k(e):r.createElement(o.Modal,e),D())}return r.createElement(o.Popconfirm,{overlayClassName:u()(F),okButtonProps:{danger:s},title:I,open:N,getPopupContainer:E,onCancel:p,placement:v,showCancel:d,okText:h||t(s?{id:"delete"}:{id:"confirm"}),cancelText:f||t({id:"cancel"}),onOpenChange:_,onConfirm:e=>{S(e)}},D())}),A=e=>{let{children:t}=e,n=x(e,S);return r.createElement(D,n,e=>r.createElement(o.Typography.Link,e,t))},R=e=>{let{children:t}=e,n=x(e,z);return r.createElement(D,n,e=>r.createElement(o.Typography.Text,e,t))},V=e=>(console.warn("\u540e\u7eed\u7248\u672c\u53ef\u80fd\u5220\u9664\u8be5api\uff0c\u8bf7\u4e0d\u8981\u4f7f\u7528"),t=>{let{children:n}=t,o=x(t,I);return r.createElement(D,o,t=>r.createElement(e,t,n))}),$=["api","onClick","params","onSuccess","onError","beforeFetch","afterFetch","fetchOptions"],q=e=>{let{api:t,onClick:n,params:o,onSuccess:a,onError:i,beforeFetch:c,afterFetch:l}=e,s=x(e,$);const u=(0,d.useFetch)(Object.assign({},t,{auto:!1})),{isLoading:m,refresh:f}=u;return r.createElement(_,w({},s,{loading:m,onClick:async()=>{try{if(c){if(!1===await c())return}const{output:e,errorStack:t}=await f(o||{});if(l&&l({data:e,errorStack:t}),Object.values(t).length>0)return void(i&&i(t));a&&a({data:e}),n&&n({data:e})}catch(e){i&&i(e)}}}))},H=k()(e=>{let{amountWidth:t,moreBtnWidth:n,buttonWidthList:r,spaceProps:o,compact:a}=e;const i=a?0:["small","middle","large"].indexOf(o.size)>-1?8*(["small","middle","large"].indexOf(o.size)+1):Number.isInteger(o.size)?o.size:8;let c=0,l=0;for(;t>=l+r[c]+c*i&&c<r.length;)l+=r[c],c+=1;for(;t<l+(c-1)*i+(c<r.length?n+i:0)&&c>0;)l-=r[c-1],c-=1;return c},e=>{let{amountWidth:t,moreBtnWidth:n,buttonWidthList:r,spaceProps:o,compact:a}=e;return"".concat(t).concat(n).concat(r.join(",")).concat(Object.values(o).join(",")).concat(a&&a.toString())});var G={"width-container":"_V58ju","hidden-container":"_XN3o6","hidden-inner":"_-depB","more-link-btn":"_Hh4Wb","menu-list":"_juFTd"};const K=["list","more","moreType","compact","showLength","getPopupContainer","trigger","itemClassName"],U=["className","confirm","buttonComponent","tooltipProps","hidden","isDelete","isModal","message"],X=(0,m.createWithIntlProvider)("zh-CN",M,"button-group")(e=>{const{formatMessage:t}=(0,m.useIntl)(),n=Object.assign({},e),{list:i,more:s,moreType:d,compact:f,showLength:p,getPopupContainer:g,trigger:h,itemClassName:b}=n,E=x(n,K),k=(0,r.useMemo)(()=>i.filter(e=>!(null!=e&&e.hidden)),[i]),y=C()(E,["size","split","align","style"]),[N,T]=(0,r.useState)(k.length&&1),F=Number.isInteger(p)?p:N,O=a(()=>{const e=P.current,t=L.current,n=W.current;if(!e)return;const o=e.querySelectorAll(".button-group-item");if(!o)return;if(0===o.length)return;const a=n.clientWidth,i=t.clientWidth,c=[].map.call(o,e=>e.offsetWidth),l=H({amountWidth:a,moreBtnWidth:i,buttonWidthList:c,spaceProps:y,compact:f});(0,r.startTransition)(()=>{T(l)})}),W=v(O),P=v(O),L=v(O),B=k.slice(F),M=(e,t,n)=>{if("function"===typeof e)return e({key:t,className:u()("button-group-item",G["btn-item"],b)},{isDropdown:n});const{className:a,confirm:i,buttonComponent:c,tooltipProps:l,isDelete:s,isModal:m,message:d}=e,f=x(e,U),p=i||d,g=c||(p?D:_),h=r.createElement(g,w({danger:p&&!1!==s},Object.assign({},f,p&&(m||n)?{isModal:!0}:{},n?{type:"default"}:{},p&&void 0!==s?{isDelete:s}:{}),{key:t,className:u()("button-group-item",a,b)}));return l?r.createElement(o.Tooltip,l,h):h},j=s||("link"===d?r.createElement(o.Button,{type:"link",className:u()("button-group-item",b,G["more-link-btn"])},r.createElement(c.A,{style:{fontSize:"16px"}})):r.createElement(o.Button,null,t({id:"more"}),r.createElement(l.A,null))),S=f?o.Space.Compact:o.Space;return r.createElement(r.Fragment,null,r.createElement("div",{className:G["width-container"],ref:W}),r.createElement("div",{className:G["hidden-container"]},r.createElement("div",{className:G["hidden-inner"],ref:L},j),r.createElement("div",{className:G["hidden-inner"],ref:P},r.createElement(S,y,k.map((e,t)=>r.createElement(r.Fragment,{key:t},M(e,t,!1)))))),r.createElement(S,y,k.slice(0,F).map((e,t)=>r.createElement(r.Fragment,{key:t},M(e,t,!1))),B.length>0&&r.createElement(o.Dropdown,{getPopupContainer:g,trigger:h,rootClassName:G["menu-list"],menu:{items:B.map((e,t)=>({key:t,label:M(e,t,!0)}))}},j)))});var J="_8fdVC",Q="_AFUod";const Y=e=>{let{children:t,className:n,innerClassName:o,target:a}=e;const[i,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=p()(()=>{c(window.innerWidth<=768)},300);return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);const l=r.createElement("div",{className:u()(Q,o)},t);return r.createElement("div",{className:u()(J,n)},i&&(0,y.createPortal)(l,a||document.body),t)}},64579(e,t,n){var r=n(78913),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},78913(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},95600(e,t,n){var r=n(2316),o=n(93375),a=n(2899),i=Math.max,c=Math.min;e.exports=function(e,t,n){var l,s,u,m,d,f,p=0,g=!1,h=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=l,r=s;return l=s=void 0,p=t,m=e.apply(r,n)}function C(e){var n=e-f;return void 0===f||n>=t||n<0||h&&e-p>=u}function E(){var e=o();if(C(e))return k(e);d=setTimeout(E,function(e){var n=t-(e-f);return h?c(n,u-(e-p)):n}(e))}function k(e){return d=void 0,v&&l?b(e):(l=s=void 0,m)}function y(){var e=o(),n=C(e);if(l=arguments,s=this,f=e,n){if(void 0===d)return function(e){return p=e,d=setTimeout(E,t),g?b(e):m}(f);if(h)return clearTimeout(d),d=setTimeout(E,t),b(f)}return void 0===d&&(d=setTimeout(E,t)),m}return t=a(t)||0,r(n)&&(g=!!n.leading,u=(h="maxWait"in n)?i(a(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),y.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=f=s=d=void 0},y.flush=function(){return void 0===d?m:k(o())},y}},93375(e,t,n){var r=n(36382);e.exports=function(){return r.Date.now()}},98771(e,t,n){var r=n(95600),o=n(2316);e.exports=function(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:a,maxWait:t,trailing:i})}},2899(e,t,n){var r=n(64579),o=n(2316),a=n(90931),i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||l.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}}}]);
//# sourceMappingURL=155.fad08abd.chunk.js.map